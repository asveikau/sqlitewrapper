
LIBCOMMON_ROOT=../common/
include $(LIBCOMMON_ROOT)Makefile.inc

LIBSQLITEWRAPPER_CXXFLAGS += -fno-rtti
LIBSQLITEWRAPPER_CXXFLAGS += -I$(LIBCOMMON_ROOT)include
LIBSQLITEWRAPPER_CXXFLAGS += -I$(LIBSQLITEWRAPPER_ROOT)include

# Needed for FreeBSD
CXXFLAGS += -I/usr/local/include
LDFLAGS += -L/usr/local/lib

ifdef WINDOWS
USE_STATIC_SQLITE=y
endif

ifdef USE_STATIC_SQLITE
LIBSQLITEWRAPPER_SRC += \
   $(LIBSQLITEWRAPPER_ROOT)third_party/sqlite/sqlite3.c
CFLAGS += \
   -I$(LIBSQLITEWRAPPER_ROOT)third_party/sqlite
else
LDFLAGS += -lsqlite3
endif

LIBSQLITEWRAPPER_SRC += \
   $(LIBSQLITEWRAPPER_ROOT)src/db.cc \
   $(LIBSQLITEWRAPPER_ROOT)src/stmt.cc \
   $(LIBSQLITEWRAPPER_ROOT)src/error.cc \

LIBSQLITEWRAPPER_OBJS := $(shell $(SRC2OBJ) $(LIBSQLITEWRAPPER_SRC))

LIBSQLITEWRAPPER=$(LIBSQLITEWRAPPER_ROOT)$(LIBPREFIX)sqlitewrapper$(LIBSUFFIX)

$(LIBSQLITEWRAPPER): ${LIBSQLITEWRAPPER_OBJS}
	$(LIBWRAPPER) $(LIBSQLITEWRAPPER_OBJS)

-include $(LIBSQLITEWRAPPER_ROOT)depend.mk

